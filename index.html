<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>AI Study</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
body{font-family:Inter;background:#f3f6fb;margin:0;padding:20px;}
.card{background:white;padding:20px;border-radius:12px;max-width:900px;margin:auto;
box-shadow:0 4px 20px rgba(0,0,0,0.08);}
textarea,input,select{width:100%;padding:10px;margin:6px 0;border:1px solid #ddd;border-radius:8px;}
button{padding:10px 16px;border:none;border-radius:8px;cursor:pointer;font-weight:600;}
.btn-primary{background:#2563eb;color:white;}
pre{background:#eef3ff;padding:14px;border-radius:10px;white-space:pre-wrap;}
</style>
</head>
<body>
<div class="card">
<h2>AI Study Assistant â€” Beautiful UI</h2>
<label><input type="radio" name="mode" value="text" checked> Text</label>
<label><input type="radio" name="mode" value="file"> File</label>
<label><input type="radio" name="mode" value="url"> URL</label>

<div id="textBox"><textarea id="textInput" rows="8"></textarea></div>
<div id="fileBox" style="display:none"><input type="file" id="fileInput"></div>
<div id="urlBox" style="display:none"><input id="urlInput" placeholder="https://..."></div>

<select id="taskSelect">
<option value="summary">Summary</option>
<option value="mindmap">Mindmap</option>
<option value="bullet">Bullet Points</option>
<option value="flashcards">Flashcards</option>
</select>

<button class="btn-primary" onclick="run()">Generate</button>
<pre id="out"></pre>
</div>

<script>
document.querySelectorAll('input[name=mode]').forEach(r=>r.onchange=()=>{
  const m=document.querySelector('input[name=mode]:checked').value;
  textBox.style.display = m==='text'?'block':'none';
  fileBox.style.display = m==='file'?'block':'none';
  urlBox.style.display  = m==='url'?'block':'none';
});

async function run(){
  const m=document.querySelector('input[name=mode]:checked').value;
  const task=document.getElementById('taskSelect').value;
  const fd=new FormData();
  fd.append("task",task);

  if(m==="text") fd.append("text",document.getElementById("textInput").value);
  if(m==="file") fd.append("file",document.getElementById("fileInput").files[0]);
  if(m==="url") fd.append("url",document.getElementById("urlInput").value);

  const r=await fetch('/api/process',{method:'POST',body:fd});
  const j=await r.json();
  out.textContent=j.output;
}
</script>
</body>
</html>
